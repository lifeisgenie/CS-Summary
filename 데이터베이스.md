# 데이터베이스

## 데이터베이스 개요

### 데이터베이스의 정의와 필요성

- **정의**: 데이터를 체계적으로 저장하고 관리하여 다수의 사용자가 데이터를 효율적으로 조회, 수정할 수 있도록 지원하는 시스템이다.
- **필요성**:
    - **데이터 중복 제거**: 동일한 데이터를 여러 번 저장하지 않음으로써 저장 공간을 효율적으로 활용한다.
    - **데이터 일관성 유지**: 여러 시스템이나 사용자 간에 동일한 데이터 상태를 유지하도록 한다.
    - **데이터 무결성 보장**: 데이터의 정확성과 신뢰성을 확보한다.
    - **데이터 공유 및 보안 강화**: 다수 사용자가 데이터를 안전하게 접근할 수 있도록 보장한다.

### 파일 시스템과 데이터베이스의 차이

- **파일 시스템**: 데이터를 비구조적으로 관리하며 중복, 무결성, 보안 등 여러 문제가 발생할 수 있다.
- **데이터베이스**: 구조화된 데이터 모델을 통해 효율적으로 데이터를 저장하고, 무결성, 보안, 동시성 등을 보장하여 관리한다.

### 데이터베이스의 특징

- **무결성(Integrity)**: 데이터의 정확성과 신뢰성을 유지하는 특징이다.
- **일관성(Consistency)**: 트랜잭션 후 데이터베이스가 일관된 상태로 유지되도록 보장한다.
- **보안(Security)**: 데이터 접근 권한을 제어하여 데이터 유출 및 손실을 방지한다.
- **동시성(Concurrency)**: 여러 사용자가 동시에 데이터에 접근할 수 있도록 지원한다.
- **복구성(Recovery)**: 시스템 장애 시 데이터를 복구할 수 있는 기능을 제공한다.

### 데이터베이스 관리 시스템(DBMS, DataBase Management System)의 역할과 구조

- **DBMS의 역할**:
    - 데이터 저장, 검색, 수정, 삭제 등의 작업을 효율적으로 처리한다.
    - 데이터의 무결성, 보안, 동시성, 복구 기능을 지원한다.
    - SQL 등의 언어를 통해 사용자가 데이터베이스와 상호작용할 수 있도록 한다.
- **DBMS의 구조**:
    - **사용자 인터페이스**: 사용자와 데이터베이스 간의 상호작용을 처리하는 SQL 명령어 처리 시스템.
    - **질의 처리기**: 사용자의 쿼리를 최적화하고 실행 계획을 생성한다.
    - **트랜잭션 관리자**: 데이터의 일관성과 무결성을 보장하는 시스템.
    - **스토리지 관리자**: 데이터를 물리적으로 저장하고 관리한다.
    - **버퍼 관리자**: 메모리와 디스크 간 데이터를 효율적으로 관리하여 성능을 최적화한다.

### 데이터베이스 모델의 종류

- **관계형 데이터베이스(Relational DB)**: 데이터를 테이블 형식으로 구조화하여 관리한다. (예: MySQL, PostgreSQL)
- **비관계형 데이터베이스(NoSQL)**: 유연한 데이터 모델을 제공하여 다양한 데이터 유형을 처리한다. (예: MongoDB, Cassandra)
- **계층형 모델/네트워크형 모델**: 트리 구조나 그래프 구조로 데이터를 표현하여 저장한다.

## 데이터 모델링

### 데이터 모델링 개념과 프로세스

- **개념**: 데이터베이스 구축 전에 데이터 구조를 시각화하고 체계적으로 설계하는 과정이다.
- **프로세스**:
    1. **요구사항 분석**: 
        - 데이터베이스가 지원해야 할 비즈니스 프로세스와 기능을 정의한다.
        - 사용자 요구사항과 데이터를 수집하여 데이터베이스 설계 목표 설정한다.
    2. **개념적 설계**: 
        - 데이터베이스에 저장될 주요 엔터티와 그 관계를 정의한다.
        - 데이터 구조를 시각화하기 위해 **ER 다이어그램(Entity-Relationship Diagram)** 작성한다.
    3. **논리적 설계**: 
        - 개념적 설계를 기반으로 **논리적 데이터 모델**을 설계한다.
        - 테이블, 속성, 키, 관계, 제약 조건 등을 정의한다.
        - **정규화** 과정을 통해 데이터 구조를 최적화한다.
    4. **물리적 설계**: 
        - 논리적 설계를 실제 데이터베이스 관리 시스템(DBMS)에 맞게 구현한다.
        - 저장소 구조, 인덱스, 파티셔닝 등 성능 최적화를 고려한다.

### ER(Entity-Relationship) 다이어그램

데이터 모델링 과정에서 데이터의 구조를 시각적으로 표현한 도구

- **엔터티(Entity):** 데이터베이스에 저장되는 객체나 개체를 의미한다.
    - **강한 엔터티(Strong Entity)**: 다른 엔터티에 의존하지 않는 독립적인 엔터티이다.
    - **약한 엔터티(Weak Entity)**: 강한 엔터티에 의존하며, 기본 키를 가지지 않고 외래 키를 통해 식별된다.
- **속성(Attribute):** 엔터티의 특징이나 정보를 나타낸다.
    - **기본 속성**: 엔터티가 가지는 고유한 정보
    - **복합 속성**: 여러 구성 요소로 이루어진 속성
    - **다중값 속성**: 한 엔터티에 대해 여러 값을 가질 수 있는 속성
- **관계(Relationship)**: 엔터티 간의 연관성을 표현한다.
    - 1:1 관계(One-to-One)
    - 1:N 관계(One-to-Many)
    - N:M 관계(Many-to-Many)

### 정규화

데이터 구조를 최적화하여 **중복 데이터 제거**와 **데이터 무결성 보장**을 목표로 하는 과정

- **제 1정규형(1NF)**:
    - 테이블에서 반복되는 그룹을 제거하고, 모든 속성 값을 원자값으로 구성한다.
    - **예시)** "전화번호" 속성에 여러 값(예: "010-1234-5678, 010-9876-5432")이 포함된 경우, 각 전화번호는 별도의 레코드로 나누어야 한다.
- **제 2정규형(2NF)**:
    - 1NF를 만족하고, 부분 함수 종속을 제거한다.
    - **예시**: 학생과 수업 정보를 저장한 테이블에서 학생 ID와 수업 ID가 복합 기본 키일 때, 학생 이름이 수업에 종속되면 2NF를 위반한다. 학생 이름을 별도의 테이블로 분리해야 한다.
- **제 3정규형(3NF)**:
    - 2NF를 만족하고, 이행적 함수 종속을 제거한다.
    - **예시**: A → B, B → C인 경우, A → C 관계를 제거한다. 예를 들어, 학생 ID → 교수 이름 → 교수 사무실 주소라면, 교수 사무실 주소를 교수 엔터티로 이동시켜야 한다.
- **BCNF(보이스-코드 정규형)**: 모든 결정자가 후보 키가 되도록 설계한다.
- **다섯 번째 정규형(5NF)**: 조인 종속성을 제거하여, 데이터 중복을 최소화한다.

### 비정규화와 성능 최적화

- **개념:** 성능 최적화를 위해 정규화된 데이터 구조를 의도적으로 해제하는 과정이다.
- **사용 목적**:
    - 정규화된 구조에서 발생하는 복잡한 조인 연산을 줄일 수 있다.
    - 데이터 조회 속도 향상 및 쿼리 성능 최적화가 가능하다.
- **주의점**:
    - 비정규화를 적용할 때, 데이터 무결성과 일관성 유지가 매우 중요하다.
    - 비정규화로 인해 쿼리가 빨라질 수 있지만, 데이터 중복이 발생할 수 있다.
- **예시:**
    - **정규화된 구조**: 고객과 주문 테이블이 분리되어 있고, 주문 정보를 조회할 때마다 조인 연산이 필요하다.
    - **비정규화된 구조**: 고객과 주문 정보를 하나의 테이블로 합쳐서 조인 연산을 줄이고 조회 성능을 향상시킬 수 있다.
 
